# 网络接口层——物理层和数据链路层

网络接口层是TCP/IP模型的最底层，负责接收从上一层交来的数据并将数据报通过底层的物理网络发送出去，比较常见的就是设备的驱动程序，此层设有特定的协议。


## 物理层

计算机在传递数据的时候，传递的都是0和1的数字，而物理层关心的是用什么信号来表示0和1，是否可以双向通信，最初的连接如何建立以及完成连接如何终止。物理层是为数据传输提供可靠的环境。


## 数据链路层

1. 数据链路层是TCP/IP模型中的第二层，介于网络层和物理层之间
2. 数据链路层在物理两层提供的服务的基础上向网络层提供服务，其最基本的服务是将源自网络层来的数据可靠地传递到相邻节点的目标机网络层。
3. 将网络层传递过来的数据包，组合成数据块(加上一个头)，在数据链路成中称这种数据包为帧，帧是数据链路层的传输单位


### 以太网





### MAC地址
* 在通信过程中，用内置在计算机网卡内的地址来标识计算机身份
* 一个计算机会有多个网卡，但是每个网卡只有一个唯一的MAC地址。因此，通过唯一的MAC地址，总能找到对应的计算机。
* MAC地址由48位的二进制组成，通常分为6段(也就是6个字节)，用16进制表示。其中前3个字节是供应商的标识，比如IBM的标识为：00 06 1b；后三位是供应商对网卡的唯一编号。
![MAC地址](https://ftp.bmp.ovh/imgs/2021/02/973a17ff97e6ea4c.jpg)
如上图所示，一个电脑上存在多个网卡设备，每个网卡设备都有一个物理地址，这个物理地址就是MAC地址。

### 交换机
交换机是一个二层设备，只在物理链路层上工作。交换机是用于两个同一个局域网内之间的计算机之间的通信。由于在同一个局域网内通过网线连接，不需要通过ip地址去查找网络，因此只需要物理层和数据链路层即可以进行通信，通信方式就是通过MAC地址，计算机A要传递数据给计算机B，那么计算机A的数据链路层上的数据包，写上A电脑的MAC地址和要传输的B电脑的MAC地址，然后交换机通过MAC地址找到B电脑。实现A,B电脑在同一个局域网下的传输。


### 以太网帧格式
* 在以太网链路上的数据包称作以太帧，以太帧起始部分由前导码和帧开始符组成。
![以太网帧](https://img-blog.csdn.net/20180506181030854?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hocGluZ3llYXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
我们通过wireshake查看一下MAC帧头部的数据格式：目的地址，源地址和类型。
![帧头部](https://ftp.bmp.ovh/imgs/2021/02/b405f3b9e37d3f55.jpg)


### ARP协议
地址解析协议，即ARP(Address Resolution Protocol)，是根据IP地址获取物理地址的一个TCP/IP协议。
我们在上面介绍过，两台计算机之间在传递数据时，需要知道源MAC地址和目的地MAC地址，源MAC地址容易知道，但是如何知道
目的地MAC地址了。这就是ARP协议做的事情，它通过IP地址能够获取到物理地址即MAC地址。

ARP的原理是广播请求单播回应：
比如计算机A,要和计算机B(假设ip地址为xxxx)通信，但是它不知道B对应的MAC地址，它只知道B的ip地址，因此他就会通过广播的形式，去问每一台服务器你的ip地址是xxxx。问到B了，B就会回答是，并且把自己的MAC地址告诉A，这样的话A就获得了对应的B地址，就可以进行数据的发送了。ARP协议的要求是所有设备必须在同一个局域网内。
